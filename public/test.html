<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <style>
        body { margin: 50px; font-family: system-ui; }
        #status { padding: 20px; border: 2px solid #000; margin: 20px 0; }
        .success { background: #d4edda; border-color: #28a745; }
        .error { background: #f8d7da; border-color: #dc3545; }
    </style>
</head>
<body>
    <h1>üß™ React Mount Test</h1>
    <div id="status">‚è≥ Testing...</div>
    <div id="root"></div>

    <script>
        const status = document.getElementById('status');
        const tests = [];
        
        function log(msg, success = true) {
            tests.push({ msg, success });
            status.innerHTML = tests.map(t => 
                `<div style="color: ${t.success ? 'green' : 'red'}">${t.success ? '‚úÖ' : '‚ùå'} ${t.msg}</div>`
            ).join('');
            status.className = tests.every(t => t.success) ? 'success' : 'error';
        }

        // Test 1: Basic JS
        log('JavaScript is running');

        // Test 2: Root exists
        const root = document.getElementById('root');
        if (root) {
            log('Root element exists');
        } else {
            log('Root element NOT found', false);
        }

        // Test 3: Try to load React - extract from main HTML
        setTimeout(() => {
            fetch('/')
                .then(r => r.text())
                .then(html => {
                    const reactMatch = html.match(/assets\/(react-vendor-[^"]+\.js)/);
                    const indexMatch = html.match(/assets\/(index-[^"]+\.js)/);
                    
                    if (!reactMatch || !indexMatch) {
                        log('Could not find script tags in HTML', false);
                        return Promise.reject(new Error('Script tags not found'));
                    }
                    
                    log(`Found react-vendor: ${reactMatch[1]}`);
                    log(`Found index: ${indexMatch[1]}`);
                    
                    return import(`/assets/${reactMatch[1]}`)
                        .then(() => {
                            log('React vendor loaded');
                            return import(`/assets/${indexMatch[1]}`);
                        });
                })
                .then(() => {
                    log('Main app module loaded');
                    
                    // Wait for React to mount
                    setTimeout(() => {
                        const content = root.innerHTML;
                        if (content.trim().length > 0) {
                            log('‚ú® React MOUNTED! Content length: ' + content.length);
                        } else {
                            log('React module loaded but nothing rendered', false);
                            log('Root HTML: ' + root.innerHTML, false);
                        }
                    }, 2000);
                })
                .catch(error => {
                    log(`Module load FAILED: ${error.message}`, false);
                    log(`Stack: ${error.stack}`, false);
                });
        }, 500);

        // Test 4: Check for console errors
        const originalError = console.error;
        console.error = function(...args) {
            log(`Console error detected: ${args[0]}`, false);
            originalError.apply(console, args);
        };
    </script>
</body>
</html>
